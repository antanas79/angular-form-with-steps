<form [formGroup]="form">
    <mat-horizontal-stepper labelPosition="bottom" formArrayName="formArray" linear>
        <ng-container *ngFor="let question of questions; let j = index;">
            <mat-step [formGroupName]="j" [stepControl]="form.get('formArray')?.get([j])">
                <ng-template matStepLabel>{{question.label}}</ng-template>
               <mat-form-field >
                <!-- <app-question [formControlName]="question.key"  [form]="form" [formArray]="form.get('formArray')" [formGroupNameNumber]="j" [question]="question"></app-question> -->
                <div [ngSwitch]="question.controlType">
                  <input matInput *ngSwitchCase="'textbox'" [formControlName]="question.key" [id]="question.key" [type]="question.type">
                  <mat-select matInput [id]="question.key" *ngSwitchCase="'dropdown'" [formControlName]="question.key">
                    <option *ngFor="let opt of question.options" [value]="opt.key">{{opt.value}}</option>
                  </mat-select>
                </div>
               </mat-form-field>
               
                <br/>
                <div>
                  <button *ngIf="j !== 0" mat-button matStepperPrevious type="button">Back</button>
                  <button *ngIf="j !== questions.length -1" mat-button matStepperNext type="button">Next</button>
                </div>
              </mat-step>
        </ng-container>
    </mat-horizontal-stepper>
  </form>

  